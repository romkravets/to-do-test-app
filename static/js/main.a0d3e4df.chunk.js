(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(25)},16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(8),c=n.n(o),s=(n(16),n(1)),r=n(2),l=n(4),u=n(3),p=n(5),h=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return a.createElement("div",{class:"page-login"},a.createElement("div",{className:"login-container"},a.createElement("h2",{className:"login-container__caption"},"Hello! ",this.props.name,a.createElement("br",null),"We are glad to see you."),a.createElement("div",null,a.createElement("span",null,"Your todo list "),a.createElement("a",{href:"/secret"},"here"))),!this.props.auth.isAutenticated()&&a.createElement("div",{className:"btn-container"},a.createElement("p",null,"Please login first"),a.createElement("button",{className:"btn",onClick:this.props.auth.login},"Login")))}}]),t}(a.Component),m=function(){function e(){Object(s.a)(this,e)}return Object(r.a)(e,[{key:"get",value:function(e,t,n){var a=new XMLHttpRequest;a.open("GET",e),a.send(),a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){var e=JSON.parse(a.response);t(e)}else n(a)}}},{key:"post",value:function(e,t,n,a){var i=new XMLHttpRequest;i.open("POST",e),i.setRequestHeader("content-type","application/json"),i.send("string"!==typeof t?JSON.stringify(t):t),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var e=JSON.parse(i.response);n(e)}else a(i)}}},{key:"delete",value:function(e,t,n){var a=new XMLHttpRequest;a.open("DELETE",e),a.send(),a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){var e=JSON.parse(a.response);t(e)}else n(a)}}},{key:"put",value:function(e,t,n,a){var i=new XMLHttpRequest;i.open("PUT",e),i.setRequestHeader("content-type","application/json"),i.send(JSON.stringify(t)),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var e=JSON.parse(i.response);n(e)}else a(i)}}}]),e}(),d=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return a.createElement("ul",{className:"task-list__content"},this.props.children)}}]),t}(a.Component),f=(n(17),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).deleteItem=function(){n.props.onDeleteItem(n.props.id)},n.onChange=function(){var e=Object.assign({},n.props);e.completed=!e.completed,n.props.onChange(e)},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return a.createElement("li",{className:"list-item",id:this.props.id},a.createElement("input",{className:"list-item__native-input",type:"checkbox",id:"input"+this.props.id,onChange:this.onChange,checked:this.props.completed}),a.createElement("span",{className:"list-item__title"},this.props.title),a.createElement("button",{className:"list-item__del",onClick:this.deleteItem},"\u2bbf"))}}]),t}(a.Component)),b=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return a.createElement("div",{className:"task-list__counter"},a.createElement("div",{className:"task-list__top"},a.createElement("span",null,this.props.counter," to do")))}}]),t}(a.Component),v=(n(18),"https://evening-dawn-11092.herokuapp.com/list"),g=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onSubmit=function(t){t.preventDefault(),console.log(t);var n=e.state.newTaskTitle;e.httpService.post(v,{title:n},function(t){e.setState(function(e){var n=Object.assign({},e);return n.newTaskTitle="",n.tasks.push(t),console.log(n),n})})},e.valueChange=function(t){var n=t.target.value;e.setState(function(e){var t=Object.assign({},e);return t.newTaskTitle=n,t})},e.deleteItem=function(t){e.httpService.delete("".concat(v,"/").concat(t),function(n){e.setState(function(e){var n=Object.assign({},e);return n.tasks=n.tasks.filter(function(e){return e.id!==t}),n})})},e.updateItem=function(t){e.httpService.put("".concat(v,"/").concat(t.id),t,function(n){e.setState(function(e){var a=Object.assign({},e),i=e.tasks.reduce(function(e,n,a){return n.id===t.id&&(e=a),e},0);return a.tasks[i]=n,a})})},e.httpService=new m,e.state={tasks:[],newTaskTitle:""},e}return Object(p.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this;this.httpService.get(v,function(t){e.setState(function(e){var n=Object.assign({},e);return n.tasks=t,console.log(n),n})})}},{key:"render",value:function(){var e=this,t=this.state.tasks.map(function(t,n){return a.createElement(f,{key:n,id:t.id,title:t.title,completed:t.completed,onDeleteItem:e.deleteItem,onChange:e.updateItem})}),n=this.state.tasks.filter(function(e){return!e.completed}).length;return a.createElement("div",{className:"task-list"},a.createElement(b,{counter:n}),a.createElement("div",{className:"list"},a.createElement(d,null,t)),a.createElement("form",{className:"task-list__head",onSubmit:this.onSubmit},a.createElement("input",{type:"text",className:"task-list__input",placeholder:"New Todo",onChange:this.valueChange,value:this.state.newTaskTitle}),a.createElement("button",{className:"task-list__btn"},"Add")))}}]),t}(a.Component),k=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return a.createElement("div",{className:"page-login"},a.createElement("header",{className:"logout-container"},a.createElement("p",{className:"logout-container__usere"},"Hello,",this.props.name),a.createElement("button",{className:"btn logout-container__btn",onClick:this.props.auth.logout},"Logout")),a.createElement(g,null))}}]),t}(a.Component),O=(n(19),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return a.createElement("div",{className:"text-center-block"},"Not found",a.createElement("br",null),"Please login")}}]),t}(a.Component)),j=n(9),y=n(10),E=n.n(y),S=function e(){var t=this;Object(s.a)(this,e),this.auth0=new j.a.WebAuth({domain:"divyanshu.auth0.com",clientID:"TJyKPI6aRiRwgr6SxlT7ExW10NEHW4Vy",redirectUri:"https://appbaseio-apps.github.io/reactivesearch-auth0-example/callback",audience:"https://divyanshu.auth0.com/userinfo",responseType:"token id_token",scope:"openid profile"}),this.login=function(){t.auth0.authorize()},this.hendleAuthentication=function(){t.auth0.parseHash(function(e,t){if(t&&t.accessToken&&t.idToken){var n=JSON.stringify(1e3*t.expiresIn+(new Date).getTime());localStorage.setItem("access_token",t.accessToken),localStorage.setItem("id_token",t.idToken),localStorage.setItem("expires_at",n),localStorage.hash="",location.pathname="/secret"}else e&&(location.pathname="/")})},this.isAutenticated=function(){var e=JSON.parse(localStorage.getItem("expires_at"));return(new Date).getTime()<e},this.logout=function(){localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),location.pathname="/"},this.getProfile=function(){return localStorage.getItem("id_token")?E()(localStorage.getItem("id_token")):{}}},w=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){(new S).hendleAuthentication()}},{key:"render",value:function(){return a.createElement("div",{className:"text-center-block"},"Loading...")}}]),t}(a.Component),_=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e="";switch(this.props.location){case"":e=i.a.createElement(h,this.props);break;case"callback":e=i.a.createElement(w,null);break;case"secret":e=this.props.auth.isAutenticated()?i.a.createElement(k,this.props):i.a.createElement(O,null);break;default:e=i.a.createElement(O,null)}return i.a.createElement("div",{className:"App"},e)}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=new S,T={};window.setState=function(e){T=Object.assign({},T,e),c.a.render(i.a.createElement(_,T),document.getElementById("root"))};var I={name:N.getProfile().given_name||"Friend",location:location.pathname.replace(/^\/?|\/$/g,""),auth:N};window.setState(I),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,1,2]]]);
//# sourceMappingURL=main.a0d3e4df.chunk.js.map